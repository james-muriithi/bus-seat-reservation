(self.webpackChunk=self.webpackChunk||[]).push([[1785],{11785:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>o});function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const i={components:{CreateTrip:function(){return s.e(1385).then(s.bind(s,51385))},EditTrip:function(){return s.e(9799).then(s.bind(s,79799))}},props:{bus_id:{default:null},route_id:{default:null},filters:{type:Object,default:function(){}}},data:function(){return{isLoading:!1,trips:[],selectedTrip:{},defaultCreateRoute:""}},computed:{columns:function(){var t=[{label:"Trip Id",field:"trip_id"},{label:"Bus Name",field:"bus_name"},{label:"Route",field:"route"},{label:"Travel Date",field:"travel_date",type:"date",dateInputFormat:"yyyy-MM-dd",dateOutputFormat:"MMM do yyyy"},{label:"Start Time",field:"board_time"},{label:"Reservations",field:"reservations"},{label:"Fare",field:"fare"},{label:"Status",field:"status"},{label:"Actions",field:"actions",html:!0,tdClass:"text-center",thClass:"text-center",sortable:!1}];return this.route_id?t.filter((function(t){return!["bus_name","route"].includes(t.field)})):this.bus_id?t.filter((function(t){return!["bus_name"].includes(t.field)})):t}},methods:{tripStatus:function(t){return 1==t?"Active":2==t?"Departured":"Cancelled"},tripStatusClass:function(t){return 1==t?"success":2==t?"info":"danger"},fetchTrips:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$store.dispatch("startLoading"),this.isLoading=e;var s="/admin/trips",a=r({},this.filters);this.bus_id&&(a.bus=this.bus_id),this.route_id&&(a.route=this.route_id),axios.get(s,{params:a}).then((function(e){t.trips=e.data.data,t.$store.dispatch("stopLoading"),t.isLoading=!1})).catch((function(e){t.$store.dispatch("stopLoading"),t.isLoading=!1}))},editTrip:function(t){this.selectedTrip=t,$("#edit-trip").modal("show")},deleteRoute:function(t){this.selecteRoute=t,$("#delete-route").modal("show")}},created:function(){this.fetchTrips()}};const o=(0,s(51900).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("div",{staticClass:"mb-5",staticStyle:{height:"300px"}},[s("spinner",{staticClass:"loading_page",attrs:{lg:!0}})],1):s("vue-good-table",{attrs:{columns:t.columns,rows:t.trips,"search-options":{placeholder:"Search this table",enabled:!0},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},"select-options":{enabled:!0,clearSelectionText:"clear",selectOnCheckboxOnly:!0},"sort-options":{enabled:!0},styleClass:"vgt-table tableOne table-hover"},scopedSlots:t._u([{key:"table-row",fn:function(e){return["actions"==e.column.field?s("span",[s("a",{staticClass:"pr-1",attrs:{href:"/admin/trips/"+e.row.id,title:"View"}},[s("i",{staticClass:"ti-eye fs-16 text-info"})]),t._v(" "),s("a",{staticClass:"pr-1",attrs:{href:"#",title:"Edit"},on:{click:function(s){return s.preventDefault(),t.editTrip(Object.assign({},e.row))}}},[s("i",{staticClass:"fa fa-pencil-alt fs-16 text-success"})]),t._v(" "),s("a",{attrs:{title:"Delete",href:"#"},on:{click:function(s){return s.preventDefault(),t.deleteRoute(Object.assign({},e.row))}}},[s("i",{staticClass:"fa fa-trash fs-16 text-danger"})])]):"bus_name"==e.column.field?s("span",[s("a",{attrs:{href:"/admin/buses/"+e.row.route.bus.id}},[t._v("\n          "+t._s(e.row.route.bus.bus_name)+" -\n          "+t._s(e.row.route.bus.bus_reg_no)+"\n        ")])]):"route"==e.column.field?s("span",[s("a",{attrs:{href:"/admin/routes/"+e.row.route.id}},[t._v("\n          "+t._s(e.row.route.board_point)+" -\n          "+t._s(e.row.route.drop_point)+"\n        ")])]):"board_time"==e.column.field?s("span",[t._v("\n        "+t._s(e.row.route.board_time)+"\n      ")]):"reservations"==e.column.field?s("span",[t._v("\n        "+t._s(e.row.reservations.length)+"\n      ")]):"fare"==e.column.field?s("span",[e.row.seat_classes_fare.length>0?s("span",t._l(e.row.seat_classes_fare,(function(e){return s("span",{key:e.id,staticClass:"badge py-1 px-2 badge-success mr-1"},[t._v("\n            "+t._s(e.name)+" - "+t._s(e.currencyCode)+t._s(e.fare)+"\n          ")])})),0):s("span",[t._v("\n          "+t._s(e.row.fare)+"\n        ")])]):"status"==e.column.field?s("span",[s("span",{class:"badge py-1 px-2 badge-outline-"+t.tripStatusClass(e.row.status)},[t._v("\n          "+t._s(t.tripStatus(e.row.status))+"\n        ")])]):t._e()]}}])},[s("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[s("button",{staticClass:"btn btn-danger btn-sm"},[t._v("Delete")])]),t._v(" "),s("div",{staticClass:"mt-2 mb-3",attrs:{slot:"table-actions"},slot:"table-actions"},[s("button",{staticClass:"btn btn-sm btn-outline-success ripple m-1"},[s("i",{staticClass:"fa fa-file-pdf"}),t._v(" PDF\n      ")]),t._v(" "),s("button",{staticClass:"btn-sm btn btn-primary btn-rounded btn-icon m-1 ripple",attrs:{"data-toggle":"modal","data-target":"#create-trip"}},[s("span",{staticClass:"ul-btn__icon"},[s("i",{staticClass:"feather-icon",attrs:{"data-feather":"plus-circle"}})]),t._v(" "),s("span",{staticClass:"ul-btn__text ml-1"},[t._v("Create")])])])]),t._v(" "),s("create-trip",{attrs:{"default-route":t.defaultCreateRoute},on:{update:function(e){return t.fetchTrips(!1)}}}),t._v(" "),s("edit-trip",{attrs:{trip:t.selectedTrip},on:{update:function(e){return t.fetchTrips(!1)}}})],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=1785.js.map
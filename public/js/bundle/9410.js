(self.webpackChunk=self.webpackChunk||[]).push([[9410],{29410:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});const i={components:{CreatePriceVariation:function(){return a.e(3326).then(a.bind(a,83326))},EditPriceVariation:function(){return a.e(3111).then(a.bind(a,23111))},DeletePriceVariation:function(){return a.e(3386).then(a.bind(a,23386))}},props:{route_id:{default:null},smallTable:{type:Boolean,default:!1}},data:function(){return{isLoading:!1,priceVariations:[],selectedPriceVariation:{}}},computed:{columns:function(){var t=[{label:"Route",field:"route"},{label:"Pickup Point",field:"pickup_point"},{label:"Drop Off Point",field:"drop_point"},{label:"fare",field:"fare",html:!0},{label:"Created At",field:"created_at",type:"date",thClass:"text-left",tdClass:"text-left",dateInputFormat:"yyyy-MM-dd HH:mm:ss",dateOutputFormat:"MMM do yyyy HH:mm"},{label:"Actions",field:"actions",html:!0,tdClass:"text-center",thClass:"text-center",sortable:!1}];return this.smallTable?t.filter((function(t){return!["created_at","route"].includes(t.field)})):t}},methods:{fetchPriceVariations:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$store.dispatch("startLoading"),this.isLoading=e;var a={route_id:this.route_id};axios.get("/admin/route-price-variations",{params:a}).then((function(e){t.priceVariations=e.data.data,t.$store.dispatch("stopLoading"),t.isLoading=!1})).catch((function(e){t.$store.dispatch("stopLoading"),t.isLoading=!1}))},editPriceVariation:function(t){this.selectedPriceVariation=t,$("#edit-price-variation").modal("show")},deletePriceVariation:function(t){this.selectedPriceVariation=t,$("#delete-price-variation").modal("show")}},created:function(){this.fetchPriceVariations()}};const n=(0,a(51900).Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?a("div",{staticClass:"mb-5",staticStyle:{height:"300px"}},[a("spinner",{staticClass:"loading_page",attrs:{lg:!0}})],1):a("vue-good-table",{attrs:{columns:t.columns,rows:t.priceVariations,"search-options":{placeholder:"Search this table",enabled:!0},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},"select-options":{enabled:!0,clearSelectionText:"clear",selectOnCheckboxOnly:!0},"sort-options":{enabled:!0},styleClass:"vgt-table tableOne table-hover"},scopedSlots:t._u([{key:"table-row",fn:function(e){return["actions"==e.column.field?a("span",[a("a",{staticClass:"pr-1",attrs:{href:"#",title:"Edit"},on:{click:function(a){return a.preventDefault(),t.editPriceVariation(Object.assign({},e.row))}}},[a("i",{staticClass:"fa fa-pencil-alt fs-16 text-success"})]),t._v(" "),a("a",{attrs:{title:"Delete",href:"#"},on:{click:function(a){return a.preventDefault(),t.deletePriceVariation(Object.assign({},e.row))}}},[a("i",{staticClass:"fa fa-trash fs-16 text-danger"})])]):"route"==e.column.field?a("span",[t._v("\n        "+t._s(e.row.route.bus.formatted_name)+"\n        "+t._s(e.row.route.route_name)+"\n      ")]):"pickup_point"==e.column.field?a("span",[t._v("\n        "+t._s(e.row.pickup_point.pickup_point)+"\n      ")]):"drop_point"==e.column.field?a("span",[t._v("\n        "+t._s(e.row.drop_point.drop_off_point)+"\n      ")]):"fare"==e.column.field?a("span",[e.row.seatClassesFare.length>0?a("span",t._l(e.row.seatClassesFare,(function(e){return a("span",{key:e.id,staticClass:"badge py-1 px-2 badge-success mr-1"},[t._v("\n            "+t._s(e.name)+" - "+t._s(e.currencyCode)+t._s(e.fare)+"\n          ")])})),0):a("span",[t._v("\n          "+t._s(e.row.fare)+"\n        ")])]):t._e()]}}])},[a("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[a("button",{staticClass:"btn btn-danger btn-sm"},[t._v("Delete")])]),t._v(" "),a("div",{staticClass:"mt-2 mb-3",attrs:{slot:"table-actions"},slot:"table-actions"},[a("button",{staticClass:"btn-sm btn btn-primary btn-rounded btn-icon m-1 ripple",attrs:{"data-toggle":"modal","data-target":"#create-price-variation"}},[a("span",{staticClass:"ul-btn__icon"},[a("i",{staticClass:"feather-icon",attrs:{"data-feather":"plus-circle"}})]),t._v(" "),a("span",{staticClass:"ul-btn__text ml-1"},[t._v("Create")])])])]),t._v(" "),a("create-price-variation",{attrs:{defaultRoute:t.route_id},on:{update:function(e){return t.fetchPriceVariations(!1)}}}),t._v(" "),a("edit-price-variation",{attrs:{priceVariation:t.selectedPriceVariation},on:{update:function(e){return t.fetchPriceVariations(!1)}}}),t._v(" "),a("delete-price-variation",{attrs:{seatClass:t.selectedPriceVariation},on:{update:function(e){return t.fetchPriceVariations(!1)}}})],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=9410.js.map